<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Form Pendaftaran Paket WiFi - IntraOne</title>
  <link rel="stylesheet" href="css/bootstrap.min.css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="shortcut icon" type="x-icon" href="media/logo-small.png">
  <link rel="stylesheet" href="css/index.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
  <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />
  <style>
    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: #0ea5e9 !important;
      box-shadow: 0 0 10px rgba(14, 165, 233, 0.5);
      background-color: rgba(255, 255, 255, 0.8);
    }

    .glass-effect {
      background: rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.18);
    }

    select:disabled {
      background-color: #f1f1f1;
      color: #9ca3af;
      cursor: not-allowed;
      opacity: 0.7;
    }
  </style>
</head>

<body class="bg-white text-gray-800">

  <!-- Bagian NAVBAR -->
  <nav class="bg-white py-4 px-4 md:px-6 lg:px-8 shadow-md sticky top-0 z-50">
    <div class="container mx-auto flex items-center justify-between">
      <a class="navbar-brand text-xl font-bold" href="#">
        <img src="media/logo.png" class="h-5 md:h-10" alt="Logo">
      </a>

      <!-- Hamburger Icon (mobile only) -->
      <button class="md:hidden focus:outline-none" id="menu-toggle">
        <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16">
          </path>
        </svg>
      </button>

      <!-- Desktop Navigation -->
      <div class="hidden md:flex items-center space-x-6">
        <a href="index.html" class="text-gray-500 hover:text-sky-700 transition">Beranda</a>
        <a href="paket.html" class="text-gray-500 hover:text-sky-700 transition">Paket</a>
        <a href="kontakkami.html" class="text-gray-500 hover:text-sky-700 transition">Kontak</a>
        <a href="login.html" class="text-gray-500 hover:text-sky-700 transition">Pembayaran</a>
        <a href="cekcoverage.html"
          class="bg-gradient-to-r from-sky-700 to-teal-500 text-white px-4 py-2 rounded-md hover:opacity-80 transition duration-300">
          Cek Coverage
        </a>
      </div>
    </div>

    <!-- Mobile Navigation (hidden by default) -->
    <div id="mobile-menu" class="md:hidden hidden px-4 pt-4 pb-6 space-y-3">
      <a href="index.html" class="block text-gray-700 hover:text-sky-700 transition">Beranda</a>
      <a href="paket.html" class="block text-gray-700 hover:text-sky-700 transition">Paket</a>
      <a href="kontakkami.html" class="block text-gray-700 hover:text-sky-700 transition">Kontak</a>
      <a href="login.html" class="block text-gray-700 hover:text-sky-700 transition">Pembayaran</a>
      <a href="cekcoverage.html" class="block text-gray-700 hover:text-sky-700 transition">Cek Coverage</a>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="flex items-center justify-center h-[250px] relative text-center px-4" data-aos="fade-down">
    <div class="absolute inset-0 bg-gradient-to-r from-sky-700 via-teal-500 to-sky-700 opacity-90"></div>
    <div
      class="relative z-10 bg-white bg-opacity-10 backdrop-blur-md px-10 py-6 rounded-lg shadow-lg border border-white/20">
      <h1 class="text-3xl md:text-4xl font-bold text-white">Formulir Pendaftaran Paket WiFi</h1>
    </div>
  </section>

  <!-- Form Section -->
  <section class="py-16 px-4">
    <div class="max-w-5xl mx-auto glass-effect p-10 md:p-16 rounded-xl shadow-2xl" data-aos="fade-up">
      <h2 class="text-3xl font-bold text-sky-700 mb-10 text-center">Isi Data Pelanggan</h2>
      <form id="formPendaftaran" class="space-y-8">
        <!-- Data Pelanggan -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <div>
            <label class="block mb-2 font-semibold">Nama Lengkap</label>
            <input type="text" class="w-full border rounded-md px-4 py-4 bg-white bg-opacity-80"
              placeholder="Masukkan nama Anda" />
          </div>
          <div>
            <label class="block mb-2 font-semibold">Nomor HP</label>
            <input type="tel" class="w-full border rounded-md px-4 py-4 bg-white bg-opacity-80"
              placeholder="08xxxxxxxxxx" />
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <div>
            <label class="block mb-2 font-semibold">Nomor HP Alternatif</label>
            <input type="tel" class="w-full border rounded-md px-4 py-4 bg-white bg-opacity-80"
              placeholder="08xxxxxxxxxx" />
          </div>
          <div>
            <label class="block mb-2 font-semibold">Nomor Telepon Rumah</label>
            <input type="tel" class="w-full border rounded-md px-4 py-4 bg-white bg-opacity-80"
              placeholder="021xxxxxxx" />
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <div>
            <label class="block mb-2 font-semibold">Tempat Lahir</label>
            <input type="text" class="w-full border rounded-md px-4 py-4 bg-white bg-opacity-80"
              placeholder="Masukkan tempat lahir" />
          </div>
          <div>
            <label class="block mb-2 font-semibold">Tanggal Lahir</label>
            <input type="date" class="w-full border rounded-md px-4 py-4 bg-white bg-opacity-80" />
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <div>
            <label class="block mb-2 font-semibold">Email</label>
            <input type="email" class="w-full border rounded-md px-4 py-4 bg-white bg-opacity-80"
              placeholder="email@domain.com" />
          </div>
          <div>
            <label class="block mb-2 font-semibold">Nomor KTP</label>
            <input type="text" class="w-full border rounded-md px-4 py-4 bg-white bg-opacity-80"
              placeholder="Masukkan nomor KTP" />
          </div>
        </div>

        <!-- Alamat -->
        <h2 class="text-2xl font-bold text-sky-700 mt-10 mb-6 text-center">Alamat Pemasangan</h2>
        <div>
          <label class="block mb-2 font-semibold">Alamat Lengkap</label>
          <textarea class="w-full border rounded-md px-4 py-4 bg-white bg-opacity-80" rows="3"
            placeholder="Jalan, RT/RW, Kelurahan, Kecamatan"></textarea>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <div>
            <label class="block mb-2 font-semibold">Kota</label>
            <select id="kota" class="w-full border rounded-md px-4 py-4 bg-white bg-opacity-80">
              <option value="default">-- Pilih Kota --</option>
              <option value="Depok">Depok</option>
              <option value="Bogor">Bogor</option>
              <option value="Bekasi">Bekasi</option>
            </select>
          </div>
          <div>
            <label class="block mb-2 font-semibold">Kecamatan</label>
            <select id="kecamatan" class="w-full border rounded-md px-4 py-4 bg-white bg-opacity-80 "></select>
          </div>
        </div>

        <!-- Paket Pilihan -->
        <h2 class="text-2xl font-bold text-sky-700 mt-10 mb-6 text-center">Pilih Paket Internet</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <div>
            <label class="block mb-2 font-semibold">Kategori Paket</label>
            <select id="kategoriPaket" class="w-full border rounded-md px-4 py-4 bg-white bg-opacity-80">
              <option value="default">-- Pilih Kategori --</option>
              <option value="Reguler">Reguler</option>
              <option value="Gamer">Gamer</option>
              <option value="Bisnis">Bisnis</option>
            </select>
          </div>
          <div>
            <label class="block mb-2 font-semibold">Paket Internet</label>
            <select id="paketInternet" class="w-full border rounded-md px-4 py-4 bg-white bg-opacity-80">
            </select>
          </div>
        </div>

        <div>
          <label class="block mb-2 font-semibold">Durasi Berlangganan</label>
          <select id="durasiBerlangganan" class="w-full border rounded-md px-4 py-4 bg-white bg-opacity-80">
            <option value="1">1 Bulan</option>
            <option value="3">3 Bulan</option>
            <option value="6">6 Bulan</option>
            <option value="12">12 Bulan</option>
          </select>
        </div>

        <!-- Total Harga -->
        <div class="bg-white bg-opacity-80 p-6 rounded-md border">
          <h3 class="text-lg font-bold text-gray-700 mb-4">Perincian Biaya</h3>
          <p>Paket: <span id="hargaPaket">Rp 0</span></p>
          <p>Biaya Admin: <span id="biayaAdmin">Rp 50.000</span></p>
          <p>PPN (11%): <span id="ppn">Rp 0</span></p>
          <hr class="my-2" />
          <p class="font-bold text-lg">Total: <span id="totalHarga">Rp 0</span></p>
        </div>

        <!-- Tombol Submit -->
        <div class="text-center">
          <button type="submit"
            class="bg-gradient-to-r from-sky-600 to-teal-500 hover:opacity-80 text-white font-semibold px-8 py-4 rounded-md transition duration-300 shadow-lg">
            Daftar Sekarang
          </button>
        </div>
      </form>
    </div>
  </section>

  <footer class="bg-sky-50 text-gray-800 py-16">
    <div class="container mx-auto px-6 flex flex-col md:flex-row justify-between items-start space-y-12 md:space-y-0">
      <div class="flex flex-col space-y-6 md:w-1/3">
        <a href="#"><img src="media/logo.png" class="h-5 md:h-10" alt="Logo" /></a>
        <p class="text-sm text-gray-500">Solusi Integrasi Digital Terdepan</p>
      </div>
      <div class="flex flex-col space-y-4 md:w-1/3">
        <h4 class="font-semibold text-indigo-700 text-lg">Informasi Kontak</h4>
        <div class="text-base space-y-1">
          <p><span class="font-semibold">Head Office</span></p>
          <p>Grand Plaza Bekasi</p>
          <p>Jl. Mayor Matthew No. 63</p>
          <p>Bekasi Timur - Bekasi 169420</p>
        </div>
      </div>
      <div class="flex flex-col md:w-1/3">
        <h4 class="font-semibold text-indigo-700 text-lg">Kantor Cabang Kami</h4>
        <p class="text-base mt-4 leading-relaxed">Depok | Bogor | Bekasi</p>
      </div>
    </div>
    <div class="mt-12 border-t border-gray-300 pt-6 text-center text-sm text-gray-600">
      <p>&copy; 2025 IntraOne. All rights reserved.</p>
    </div>
  </footer>

  <div id="modalKonfirmasi" class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
    <div class="bg-white rounded-lg p-6 w-[90%] max-w-xl text-left">
      <h2 class="text-xl font-bold mb-4 text-sky-700">Konfirmasi Data Pendaftaran</h2>
      <div class="space-y-2 text-sm text-gray-700">
        <p><strong>Nama:</strong> <span id="confirmNama"></span></p>
        <p><strong>Nomor HP:</strong> <span id="confirmHP"></span></p>
        <p><strong>Email:</strong> <span id="confirmEmail"></span></p>
        <p><strong>Nomor KTP:</strong> <span id="confirmKTP"></span></p>
        <p><strong>Alamat:</strong> <span id="confirmAlamat"></span></p>
        <p><strong>Paket Internet:</strong> <span id="confirmPaket"></span></p>
      </div>
      <div class="mt-6 flex justify-end">
        <button id="lanjutkanRegistrasi"
          class="bg-gradient-to-r from-sky-600 to-teal-500 hover:opacity-80 text-white px-4 py-2 rounded">Lanjutkan
          Registrasi</button>
      </div>
    </div>
  </div>


  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
  <script>
    AOS.init({ duration: 1000, once: true });

    $(document).ready(function () {
      $("#kecamatan").prop("disabled", true);
      $("#paketInternet").prop("disabled", true);
    });

    const kecamatanData = {
      Depok: ["Beji", "Cimanggis", "Pancoran Mas"],
      Bogor: ["Bogor Utara", "Bogor Selatan", "Tanah Sareal"],
      Bekasi: ["Bekasi Barat", "Bekasi Timur", "Medansatria"],
    };

    $("#kota").on("change", function () {
      const kota = $(this).val();
      const kecamatanSelect = $("#kecamatan");

      if (kota === "default") {
        kecamatanSelect.empty().prop("disabled", true);
      } else {
        const kecamatanList = kecamatanData[kota] || [];
        kecamatanSelect.empty().prop("disabled", false);
        kecamatanList.forEach((kecamatan) => {
          kecamatanSelect.append(`<option value="${kecamatan}">${kecamatan}</option>`);
        });
      }
    });

    const paketOptions = {
      Reguler: [
        { name: "Basic Plan - 20 Mbps - Rp 150.000/Bulan", harga: 150000 },
        { name: "Standard Plan - 75 Mbps - Rp 300.000/Bulan", harga: 300000 },
        { name: "MaxOne Plan - 100 Mbps - Rp 400.000/Bulan", harga: 400000 },
      ],
      Gamer: [
        { name: "Gamer Basic - 75 Mbps - Rp 350.000/Bulan", harga: 350000 },
        { name: "Gamer Pro - 150 Mbps - Rp 500.000/Bulan", harga: 500000 },
      ],
      Bisnis: [
        { name: "Bisnis Starter - 100 Mbps - Rp 600.000/Bulan", harga: 600000 },
        { name: "Bisnis Pro - 200 Mbps - Rp 1.000.000/Bulan", harga: 1000000 },
      ],
    };

    function updateHarga() {
      const hargaPaket = $("option:selected", "#paketInternet").data("harga") || 0;
      const durasi = parseInt($("#durasiBerlangganan").val()) || 1;
      const biayaAdmin = 50000;
      const subTotal = hargaPaket * durasi;
      const ppn = subTotal * 0.11;
      const total = subTotal + biayaAdmin + ppn;

      $("#hargaPaket").text(`Rp ${subTotal.toLocaleString("id-ID")}`);
      $("#biayaAdmin").text(`Rp ${biayaAdmin.toLocaleString("id-ID")}`);
      $("#ppn").text(`Rp ${ppn.toLocaleString("id-ID")}`);
      $("#totalHarga").text(`Rp ${total.toLocaleString("id-ID")}`);
    }

    $("#kategoriPaket").on("change", function () {
      const kategori = $(this).val();
      const paketSelect = $("#paketInternet");

      if (kategori === "default") {
        paketSelect.empty().prop("disabled", true);
      } else {
        const paketList = paketOptions[kategori] || [];
        paketSelect.empty().prop("disabled", false);
        paketList.forEach((paket) => {
          paketSelect.append(`<option data-harga="${paket.harga}" value="${paket.name}">${paket.name}</option>`);
        });
      }
    });

    $("#paketInternet, #durasiBerlangganan").on("change", updateHarga);

    document.addEventListener("DOMContentLoaded", function () {
      const form = document.getElementById("formPendaftaran");
      const modal = document.getElementById("modalKonfirmasi");
      const btnLanjutkan = document.getElementById("lanjutkanRegistrasi");

      if (!form) return;

      form.addEventListener("submit", function (e) {
        e.preventDefault();

        let isValid = true;
        let messages = [];
        let firstInvalidField = null; // ⬅️ Tambahan penting!

        const nama = form.querySelector("input[placeholder='Masukkan nama Anda']");
        const nomorHP = form.querySelector("input[placeholder='08xxxxxxxxxx']");
        const email = form.querySelector("input[type='email']");
        const ktp = form.querySelector("input[placeholder='Masukkan nomor KTP']");
        const alamat = form.querySelector("textarea");
        const kecamatan = form.querySelector("#kecamatan");
        const paket = form.querySelector("#paketInternet");

        if (nama.value.trim() === "") {
          isValid = false;
          messages.push("Nama tidak boleh kosong.");
          if (!firstInvalidField) firstInvalidField = nama;
        }
        if (!/^\d{10,13}$/.test(nomorHP.value.trim())) {
          isValid = false;
          messages.push("Nomor HP harus terdiri dari 10-13 digit angka.");
          if (!firstInvalidField) firstInvalidField = nomorHP;
        }
        if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email.value.trim())) {
          isValid = false;
          messages.push("Format email tidak valid.");
          if (!firstInvalidField) firstInvalidField = email;
        }
        if (!/^\d{16}$/.test(ktp.value.trim())) {
          isValid = false;
          messages.push("Nomor KTP harus 16 digit angka.");
          if (!firstInvalidField) firstInvalidField = ktp;
        }
        if (alamat.value.trim() === "") {
          isValid = false;
          messages.push("Alamat lengkap wajib diisi.");
          if (!firstInvalidField) firstInvalidField = alamat;
        }
        if (kecamatan.disabled || !kecamatan.value) {
          isValid = false;
          messages.push("Silakan pilih kecamatan.");
          if (!firstInvalidField) firstInvalidField = kecamatan[0]; // jQuery to native
        }
        if (paket.disabled || !paket.value) {
          isValid = false;
          messages.push("Silakan pilih paket internet.");
          if (!firstInvalidField) firstInvalidField = paket[0];
        }

        if (!isValid) {
          alert(messages.join("\n"));
          firstInvalidField.focus(); // ✅ fokus ke field pertama yang gagal
          return;
        }

        const formData = {
          nama: $("input[placeholder='Masukkan nama Anda']").val(),
          noHP: $("input[placeholder='08xxxxxxxxxx']").first().val(),
          noHPAlternatif: $("input[placeholder='08xxxxxxxxxx']").last().val(),
          noTeleponRumah: $("input[placeholder='021xxxxxxx']").val(),
          tempatLahir: $("input[placeholder='Masukkan tempat lahir']").val(),
          tanggalLahir: $("input[type='date']").val(),
          email: $("input[type='email']").val(),
          noKTP: $("input[placeholder='Masukkan nomor KTP']").val(),
          alamat: $("textarea").val(),
          kota: $("#kota").val(),
          kecamatan: $("#kecamatan").val(),
          kategoriPaket: $("#kategoriPaket").val(),
          paketInternet: $("#paketInternet").val(),
          durasiBerlangganan: $("#durasiBerlangganan").val(),
          hargaPaket: $("#hargaPaket").text(),
          biayaAdmin: $("#biayaAdmin").text(),
          ppn: $("#ppn").text(),
          totalHarga: $("#totalHarga").text(),
        };

        // Simpan ke localStorage
        let daftarPelanggan = JSON.parse(localStorage.getItem("daftarPelanggan")) || [];
        daftarPelanggan.push(formData);
        localStorage.setItem("daftarPelanggan", JSON.stringify(daftarPelanggan));


        // Tampilkan data di modal konfirmasi
        document.getElementById("confirmNama").innerText = nama.value;
        document.getElementById("confirmHP").innerText = nomorHP.value;
        document.getElementById("confirmEmail").innerText = email.value;
        document.getElementById("confirmKTP").innerText = ktp.value;
        document.getElementById("confirmAlamat").innerText = alamat.value;
        document.getElementById("confirmPaket").innerText = paket.value;

        modal.classList.remove("hidden");
      });

      btnLanjutkan.addEventListener("click", function () {
        const nama = document.getElementById("confirmNama").innerText;
        const nomorHP = document.getElementById("confirmHP").innerText;
        const email = document.getElementById("confirmEmail").innerText;
        const ktp = document.getElementById("confirmKTP").innerText;
        const alamat = document.getElementById("confirmAlamat").innerText;
        const paket = document.getElementById("confirmPaket").innerText;

        const pesan = `Halo Admin IntraOne!\n\nSaya ingin mendaftar paket wifi dengan rincian:\n\nNama: ${nama}\nNomor HP: ${nomorHP}\nEmail: ${email}\nNomor KTP: ${ktp}\nAlamat: ${alamat}\nPaket Internet: ${paket}\n\nMohon diproses, terima kasih!`;

        const whatsappUrl = `https://wa.me/6281212678789?text=${encodeURIComponent(pesan)}`;
        window.open(whatsappUrl, '_blank');

        modal.classList.add("hidden");
      });
    });
  </script>
</body>

</html>